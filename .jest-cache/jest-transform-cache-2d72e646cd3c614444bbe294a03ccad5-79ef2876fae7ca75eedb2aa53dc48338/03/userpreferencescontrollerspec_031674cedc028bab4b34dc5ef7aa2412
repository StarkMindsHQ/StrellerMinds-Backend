d381130c6d436644649053c1ee2381c3
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const testing_1 = require("@nestjs/testing");
const user_preferences_controller_1 = require("./user-preferences.controller");
const user_preferences_service_1 = require("./user-preferences.service");
const common_1 = require("@nestjs/common");
const mockPreferences = {
    id: 'pref-1',
    user: { id: 'user-1' },
    learningCustomization: { preferredTopics: ['Math'], learningPace: 'fast', learningGoals: 'Master Algebra' },
    notificationSettings: { emailEnabled: true, frequency: 'immediate', rules: { courseUpdate: true } },
    personalizationData: { theme: 'dark', language: 'en', accessibility: ['high-contrast'] },
    analytics: { lastUpdated: new Date(), usageStats: { create: 1 } },
};
describe('UserPreferencesController', () => {
    let controller;
    let service;
    const mockService = {
        create: jest.fn(),
        findByUserId: jest.fn(),
        update: jest.fn(),
        getCustomizedLearningPath: jest.fn(),
    };
    beforeEach(async () => {
        const module = await testing_1.Test.createTestingModule({
            controllers: [user_preferences_controller_1.UserPreferencesController],
            providers: [
                { provide: user_preferences_service_1.UserPreferencesService, useValue: mockService },
            ],
        }).compile();
        controller = module.get(user_preferences_controller_1.UserPreferencesController);
        service = module.get(user_preferences_service_1.UserPreferencesService);
        jest.clearAllMocks();
    });
    describe('create', () => {
        it('should create user preferences', async () => {
            const dto = {
                learningCustomization: { preferredTopics: ['Math'] },
            };
            mockService.create.mockResolvedValue(mockPreferences);
            const req = { body: { userId: 'user-1' } };
            const result = await controller.create(req, dto);
            expect(service.create).toHaveBeenCalledWith('user-1', dto);
            expect(result).toEqual(mockPreferences);
        });
    });
    describe('get', () => {
        it('should return user preferences', async () => {
            mockService.findByUserId.mockResolvedValue(mockPreferences);
            const result = await controller.get('user-1');
            expect(service.findByUserId).toHaveBeenCalledWith('user-1');
            expect(result).toEqual(mockPreferences);
        });
        it('should throw NotFoundException if preferences not found', async () => {
            mockService.findByUserId.mockRejectedValue(new common_1.NotFoundException());
            await expect(controller.get('user-1')).rejects.toThrow(common_1.NotFoundException);
        });
    });
    describe('update', () => {
        it('should update user preferences', async () => {
            const dto = {
                learningCustomization: { preferredTopics: ['Science'] },
            };
            mockService.update.mockResolvedValue({ ...mockPreferences, learningCustomization: dto.learningCustomization });
            const result = await controller.update('user-1', dto);
            expect(service.update).toHaveBeenCalledWith('user-1', dto);
            expect(result.learningCustomization.preferredTopics).toContain('Science');
        });
    });
    describe('getLearningPath', () => {
        it('should return customized learning path', async () => {
            const learningPath = { suggestedTopics: ['Math'], pace: 'fast', goals: 'Master Algebra' };
            mockService.getCustomizedLearningPath.mockResolvedValue(learningPath);
            const result = await controller.getLearningPath('user-1');
            expect(service.getCustomizedLearningPath).toHaveBeenCalledWith('user-1');
            expect(result).toEqual(learningPath);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxnLWVrb2hcXERlc2t0b3BcXFN0cmVsbGVyTWluZHMtQmFja2VuZFxcc3JjXFx1c2VyLXByZWZlcmVuY2VzXFx1c2VyLXByZWZlcmVuY2VzLmNvbnRyb2xsZXIuc3BlYy50cyIsIm1hcHBpbmdzIjoiOztBQUFBLDZDQUFzRDtBQUN0RCwrRUFBMEU7QUFDMUUseUVBQW9FO0FBRXBFLDJDQUFtRDtBQUVuRCxNQUFNLGVBQWUsR0FBRztJQUN0QixFQUFFLEVBQUUsUUFBUTtJQUNaLElBQUksRUFBRSxFQUFFLEVBQUUsRUFBRSxRQUFRLEVBQUU7SUFDdEIscUJBQXFCLEVBQUUsRUFBRSxlQUFlLEVBQUUsQ0FBQyxNQUFNLENBQUMsRUFBRSxZQUFZLEVBQUUsTUFBTSxFQUFFLGFBQWEsRUFBRSxnQkFBZ0IsRUFBRTtJQUMzRyxvQkFBb0IsRUFBRSxFQUFFLFlBQVksRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLFdBQVcsRUFBRSxLQUFLLEVBQUUsRUFBRSxZQUFZLEVBQUUsSUFBSSxFQUFFLEVBQUU7SUFDbkcsbUJBQW1CLEVBQUUsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsYUFBYSxFQUFFLENBQUMsZUFBZSxDQUFDLEVBQUU7SUFDeEYsU0FBUyxFQUFFLEVBQUUsV0FBVyxFQUFFLElBQUksSUFBSSxFQUFFLEVBQUUsVUFBVSxFQUFFLEVBQUUsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO0NBQ2xFLENBQUM7QUFFRixRQUFRLENBQUMsMkJBQTJCLEVBQUUsR0FBRyxFQUFFO0lBQ3pDLElBQUksVUFBcUMsQ0FBQztJQUMxQyxJQUFJLE9BQStCLENBQUM7SUFFcEMsTUFBTSxXQUFXLEdBQUc7UUFDbEIsTUFBTSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDakIsWUFBWSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDdkIsTUFBTSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDakIseUJBQXlCLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtLQUNyQyxDQUFDO0lBRUYsVUFBVSxDQUFDLEtBQUssSUFBSSxFQUFFO1FBQ3BCLE1BQU0sTUFBTSxHQUFrQixNQUFNLGNBQUksQ0FBQyxtQkFBbUIsQ0FBQztZQUMzRCxXQUFXLEVBQUUsQ0FBQyx1REFBeUIsQ0FBQztZQUN4QyxTQUFTLEVBQUU7Z0JBQ1QsRUFBRSxPQUFPLEVBQUUsaURBQXNCLEVBQUUsUUFBUSxFQUFFLFdBQVcsRUFBRTthQUMzRDtTQUNGLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUViLFVBQVUsR0FBRyxNQUFNLENBQUMsR0FBRyxDQUE0Qix1REFBeUIsQ0FBQyxDQUFDO1FBQzlFLE9BQU8sR0FBRyxNQUFNLENBQUMsR0FBRyxDQUF5QixpREFBc0IsQ0FBQyxDQUFDO1FBQ3JFLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztJQUN2QixDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxRQUFRLEVBQUUsR0FBRyxFQUFFO1FBQ3RCLEVBQUUsQ0FBQyxnQ0FBZ0MsRUFBRSxLQUFLLElBQUksRUFBRTtZQUM5QyxNQUFNLEdBQUcsR0FBNkI7Z0JBQ3BDLHFCQUFxQixFQUFFLEVBQUUsZUFBZSxFQUFFLENBQUMsTUFBTSxDQUFDLEVBQUU7YUFDckQsQ0FBQztZQUNGLFdBQVcsQ0FBQyxNQUFNLENBQUMsaUJBQWlCLENBQUMsZUFBZSxDQUFDLENBQUM7WUFDdEQsTUFBTSxHQUFHLEdBQUcsRUFBRSxJQUFJLEVBQUUsRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLEVBQUUsQ0FBQztZQUMzQyxNQUFNLE1BQU0sR0FBRyxNQUFNLFVBQVUsQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1lBQ2pELE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsb0JBQW9CLENBQUMsUUFBUSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1lBQzNELE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxPQUFPLENBQUMsZUFBZSxDQUFDLENBQUM7UUFDMUMsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxLQUFLLEVBQUUsR0FBRyxFQUFFO1FBQ25CLEVBQUUsQ0FBQyxnQ0FBZ0MsRUFBRSxLQUFLLElBQUksRUFBRTtZQUM5QyxXQUFXLENBQUMsWUFBWSxDQUFDLGlCQUFpQixDQUFDLGVBQWUsQ0FBQyxDQUFDO1lBQzVELE1BQU0sTUFBTSxHQUFHLE1BQU0sVUFBVSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUM5QyxNQUFNLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFDLG9CQUFvQixDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQzVELE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxPQUFPLENBQUMsZUFBZSxDQUFDLENBQUM7UUFDMUMsQ0FBQyxDQUFDLENBQUM7UUFDSCxFQUFFLENBQUMseURBQXlELEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDdkUsV0FBVyxDQUFDLFlBQVksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLDBCQUFpQixFQUFFLENBQUMsQ0FBQztZQUNwRSxNQUFNLE1BQU0sQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQywwQkFBaUIsQ0FBQyxDQUFDO1FBQzVFLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsUUFBUSxFQUFFLEdBQUcsRUFBRTtRQUN0QixFQUFFLENBQUMsZ0NBQWdDLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDOUMsTUFBTSxHQUFHLEdBQTZCO2dCQUNwQyxxQkFBcUIsRUFBRSxFQUFFLGVBQWUsRUFBRSxDQUFDLFNBQVMsQ0FBQyxFQUFFO2FBQ3hELENBQUM7WUFDRixXQUFXLENBQUMsTUFBTSxDQUFDLGlCQUFpQixDQUFDLEVBQUUsR0FBRyxlQUFlLEVBQUUscUJBQXFCLEVBQUUsR0FBRyxDQUFDLHFCQUFxQixFQUFFLENBQUMsQ0FBQztZQUMvRyxNQUFNLE1BQU0sR0FBRyxNQUFNLFVBQVUsQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1lBQ3RELE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsb0JBQW9CLENBQUMsUUFBUSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1lBQzNELE1BQU0sQ0FBQyxNQUFNLENBQUMscUJBQXFCLENBQUMsZUFBZSxDQUFDLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQzVFLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsaUJBQWlCLEVBQUUsR0FBRyxFQUFFO1FBQy9CLEVBQUUsQ0FBQyx3Q0FBd0MsRUFBRSxLQUFLLElBQUksRUFBRTtZQUN0RCxNQUFNLFlBQVksR0FBRyxFQUFFLGVBQWUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLGdCQUFnQixFQUFFLENBQUM7WUFDMUYsV0FBVyxDQUFDLHlCQUF5QixDQUFDLGlCQUFpQixDQUFDLFlBQVksQ0FBQyxDQUFDO1lBQ3RFLE1BQU0sTUFBTSxHQUFHLE1BQU0sVUFBVSxDQUFDLGVBQWUsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUMxRCxNQUFNLENBQUMsT0FBTyxDQUFDLHlCQUF5QixDQUFDLENBQUMsb0JBQW9CLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDekUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUN2QyxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxnLWVrb2hcXERlc2t0b3BcXFN0cmVsbGVyTWluZHMtQmFja2VuZFxcc3JjXFx1c2VyLXByZWZlcmVuY2VzXFx1c2VyLXByZWZlcmVuY2VzLmNvbnRyb2xsZXIuc3BlYy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUZXN0LCBUZXN0aW5nTW9kdWxlIH0gZnJvbSAnQG5lc3Rqcy90ZXN0aW5nJztcclxuaW1wb3J0IHsgVXNlclByZWZlcmVuY2VzQ29udHJvbGxlciB9IGZyb20gJy4vdXNlci1wcmVmZXJlbmNlcy5jb250cm9sbGVyJztcclxuaW1wb3J0IHsgVXNlclByZWZlcmVuY2VzU2VydmljZSB9IGZyb20gJy4vdXNlci1wcmVmZXJlbmNlcy5zZXJ2aWNlJztcclxuaW1wb3J0IHsgQ3JlYXRlVXNlclByZWZlcmVuY2VzRHRvIH0gZnJvbSAnLi9kdG9zL2NyZWF0ZS11c2VyLXByZWZlcmVuY2VzLmR0byc7XHJcbmltcG9ydCB7IE5vdEZvdW5kRXhjZXB0aW9uIH0gZnJvbSAnQG5lc3Rqcy9jb21tb24nO1xyXG5cclxuY29uc3QgbW9ja1ByZWZlcmVuY2VzID0ge1xyXG4gIGlkOiAncHJlZi0xJyxcclxuICB1c2VyOiB7IGlkOiAndXNlci0xJyB9LFxyXG4gIGxlYXJuaW5nQ3VzdG9taXphdGlvbjogeyBwcmVmZXJyZWRUb3BpY3M6IFsnTWF0aCddLCBsZWFybmluZ1BhY2U6ICdmYXN0JywgbGVhcm5pbmdHb2FsczogJ01hc3RlciBBbGdlYnJhJyB9LFxyXG4gIG5vdGlmaWNhdGlvblNldHRpbmdzOiB7IGVtYWlsRW5hYmxlZDogdHJ1ZSwgZnJlcXVlbmN5OiAnaW1tZWRpYXRlJywgcnVsZXM6IHsgY291cnNlVXBkYXRlOiB0cnVlIH0gfSxcclxuICBwZXJzb25hbGl6YXRpb25EYXRhOiB7IHRoZW1lOiAnZGFyaycsIGxhbmd1YWdlOiAnZW4nLCBhY2Nlc3NpYmlsaXR5OiBbJ2hpZ2gtY29udHJhc3QnXSB9LFxyXG4gIGFuYWx5dGljczogeyBsYXN0VXBkYXRlZDogbmV3IERhdGUoKSwgdXNhZ2VTdGF0czogeyBjcmVhdGU6IDEgfSB9LFxyXG59O1xyXG5cclxuZGVzY3JpYmUoJ1VzZXJQcmVmZXJlbmNlc0NvbnRyb2xsZXInLCAoKSA9PiB7XHJcbiAgbGV0IGNvbnRyb2xsZXI6IFVzZXJQcmVmZXJlbmNlc0NvbnRyb2xsZXI7XHJcbiAgbGV0IHNlcnZpY2U6IFVzZXJQcmVmZXJlbmNlc1NlcnZpY2U7XHJcblxyXG4gIGNvbnN0IG1vY2tTZXJ2aWNlID0ge1xyXG4gICAgY3JlYXRlOiBqZXN0LmZuKCksXHJcbiAgICBmaW5kQnlVc2VySWQ6IGplc3QuZm4oKSxcclxuICAgIHVwZGF0ZTogamVzdC5mbigpLFxyXG4gICAgZ2V0Q3VzdG9taXplZExlYXJuaW5nUGF0aDogamVzdC5mbigpLFxyXG4gIH07XHJcblxyXG4gIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3QgbW9kdWxlOiBUZXN0aW5nTW9kdWxlID0gYXdhaXQgVGVzdC5jcmVhdGVUZXN0aW5nTW9kdWxlKHtcclxuICAgICAgY29udHJvbGxlcnM6IFtVc2VyUHJlZmVyZW5jZXNDb250cm9sbGVyXSxcclxuICAgICAgcHJvdmlkZXJzOiBbXHJcbiAgICAgICAgeyBwcm92aWRlOiBVc2VyUHJlZmVyZW5jZXNTZXJ2aWNlLCB1c2VWYWx1ZTogbW9ja1NlcnZpY2UgfSxcclxuICAgICAgXSxcclxuICAgIH0pLmNvbXBpbGUoKTtcclxuXHJcbiAgICBjb250cm9sbGVyID0gbW9kdWxlLmdldDxVc2VyUHJlZmVyZW5jZXNDb250cm9sbGVyPihVc2VyUHJlZmVyZW5jZXNDb250cm9sbGVyKTtcclxuICAgIHNlcnZpY2UgPSBtb2R1bGUuZ2V0PFVzZXJQcmVmZXJlbmNlc1NlcnZpY2U+KFVzZXJQcmVmZXJlbmNlc1NlcnZpY2UpO1xyXG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdjcmVhdGUnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSB1c2VyIHByZWZlcmVuY2VzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBkdG86IENyZWF0ZVVzZXJQcmVmZXJlbmNlc0R0byA9IHtcclxuICAgICAgICBsZWFybmluZ0N1c3RvbWl6YXRpb246IHsgcHJlZmVycmVkVG9waWNzOiBbJ01hdGgnXSB9LFxyXG4gICAgICB9O1xyXG4gICAgICBtb2NrU2VydmljZS5jcmVhdGUubW9ja1Jlc29sdmVkVmFsdWUobW9ja1ByZWZlcmVuY2VzKTtcclxuICAgICAgY29uc3QgcmVxID0geyBib2R5OiB7IHVzZXJJZDogJ3VzZXItMScgfSB9O1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmNyZWF0ZShyZXEsIGR0byk7XHJcbiAgICAgIGV4cGVjdChzZXJ2aWNlLmNyZWF0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3VzZXItMScsIGR0byk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwobW9ja1ByZWZlcmVuY2VzKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnZ2V0JywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gdXNlciBwcmVmZXJlbmNlcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgbW9ja1NlcnZpY2UuZmluZEJ5VXNlcklkLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tQcmVmZXJlbmNlcyk7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0KCd1c2VyLTEnKTtcclxuICAgICAgZXhwZWN0KHNlcnZpY2UuZmluZEJ5VXNlcklkKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgndXNlci0xJyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwobW9ja1ByZWZlcmVuY2VzKTtcclxuICAgIH0pO1xyXG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBwcmVmZXJlbmNlcyBub3QgZm91bmQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIG1vY2tTZXJ2aWNlLmZpbmRCeVVzZXJJZC5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgTm90Rm91bmRFeGNlcHRpb24oKSk7XHJcbiAgICAgIGF3YWl0IGV4cGVjdChjb250cm9sbGVyLmdldCgndXNlci0xJykpLnJlamVjdHMudG9UaHJvdyhOb3RGb3VuZEV4Y2VwdGlvbik7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ3VwZGF0ZScsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgdXBkYXRlIHVzZXIgcHJlZmVyZW5jZXMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGR0bzogQ3JlYXRlVXNlclByZWZlcmVuY2VzRHRvID0ge1xyXG4gICAgICAgIGxlYXJuaW5nQ3VzdG9taXphdGlvbjogeyBwcmVmZXJyZWRUb3BpY3M6IFsnU2NpZW5jZSddIH0sXHJcbiAgICAgIH07XHJcbiAgICAgIG1vY2tTZXJ2aWNlLnVwZGF0ZS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IC4uLm1vY2tQcmVmZXJlbmNlcywgbGVhcm5pbmdDdXN0b21pemF0aW9uOiBkdG8ubGVhcm5pbmdDdXN0b21pemF0aW9uIH0pO1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLnVwZGF0ZSgndXNlci0xJywgZHRvKTtcclxuICAgICAgZXhwZWN0KHNlcnZpY2UudXBkYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgndXNlci0xJywgZHRvKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5sZWFybmluZ0N1c3RvbWl6YXRpb24ucHJlZmVycmVkVG9waWNzKS50b0NvbnRhaW4oJ1NjaWVuY2UnKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnZ2V0TGVhcm5pbmdQYXRoJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gY3VzdG9taXplZCBsZWFybmluZyBwYXRoJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBsZWFybmluZ1BhdGggPSB7IHN1Z2dlc3RlZFRvcGljczogWydNYXRoJ10sIHBhY2U6ICdmYXN0JywgZ29hbHM6ICdNYXN0ZXIgQWxnZWJyYScgfTtcclxuICAgICAgbW9ja1NlcnZpY2UuZ2V0Q3VzdG9taXplZExlYXJuaW5nUGF0aC5tb2NrUmVzb2x2ZWRWYWx1ZShsZWFybmluZ1BhdGgpO1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmdldExlYXJuaW5nUGF0aCgndXNlci0xJyk7XHJcbiAgICAgIGV4cGVjdChzZXJ2aWNlLmdldEN1c3RvbWl6ZWRMZWFybmluZ1BhdGgpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCd1c2VyLTEnKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChsZWFybmluZ1BhdGgpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pOyAiXSwidmVyc2lvbiI6M30=