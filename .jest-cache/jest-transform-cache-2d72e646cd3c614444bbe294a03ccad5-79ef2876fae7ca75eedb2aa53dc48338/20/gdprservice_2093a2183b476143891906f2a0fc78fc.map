{"file":"C:\\Users\\g-ekoh\\Desktop\\StrellerMinds-Backend\\src\\gdpr\\gdpr.service.ts","mappings":";;;;;;;;;;;;;AAAA,2CAA4C;AAC5C,uDAAmD;AACnD,+DAA0D;AAC1D,mEAA8D;AAE9D;;GAEG;AAEI,IAAM,WAAW,GAAjB,MAAM,WAAW;IACtB,YACU,cAA8B,EAC9B,iBAAoC,EACpC,mBAAwC;QAFxC,mBAAc,GAAd,cAAc,CAAgB;QAC9B,sBAAiB,GAAjB,iBAAiB,CAAmB;QACpC,wBAAmB,GAAnB,mBAAmB,CAAqB;IAC/C,CAAC;IAEJ;;OAEG;IACH,iBAAiB;QACf,OAAO,IAAI,CAAC,cAAc,CAAC;IAC7B,CAAC;IAED;;OAEG;IACH,oBAAoB;QAClB,OAAO,IAAI,CAAC,iBAAiB,CAAC;IAChC,CAAC;IAED;;OAEG;IACH,sBAAsB;QACpB,OAAO,IAAI,CAAC,mBAAmB,CAAC;IAClC,CAAC;IAED;;;;OAIG;IACH,KAAK,CAAC,wBAAwB,CAAC,MAAc;QAC3C,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,cAAc,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC;QACnE,MAAM,gBAAgB,GACpB,MAAM,IAAI,CAAC,mBAAmB,CAAC,mBAAmB,CAAC,MAAM,CAAC,CAAC;QAE7D,OAAO;YACL,MAAM;YACN,WAAW,EAAE,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE;YACrC,QAAQ,EAAE,QAAQ,CAAC,MAAM;YACzB,sBAAsB,EAAE,gBAAgB,CAAC,MAAM,CAC7C,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,MAAM,KAAK,SAAS,IAAI,CAAC,CAAC,MAAM,KAAK,aAAa,CAC5D,CAAC,MAAM;YACR,yBAAyB,EAAE,gBAAgB,CAAC,MAAM,CAChD,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,MAAM,KAAK,WAAW,CAChC,CAAC,MAAM;SACT,CAAC;IACJ,CAAC;CACF,CAAA;AAlDY,kCAAW;sBAAX,WAAW;IADvB,IAAA,mBAAU,GAAE;yDAGe,gCAAc,oBAAd,gCAAc,oDACX,uCAAiB,oBAAjB,uCAAiB,oDACf,2CAAmB,oBAAnB,2CAAmB;GAJvC,WAAW,CAkDvB","names":[],"sources":["C:\\Users\\g-ekoh\\Desktop\\StrellerMinds-Backend\\src\\gdpr\\gdpr.service.ts"],"sourcesContent":["import { Injectable } from '@nestjs/common';\r\nimport { ConsentService } from './consent.service';\r\nimport { DataExportService } from './data-export.service';\r\nimport { DataDeletionService } from './data-deletion.service';\r\n\r\n/**\r\n * GdprService provides logic for user consent, data export, and deletion requests.\r\n */\r\n@Injectable()\r\nexport class GdprService {\r\n  constructor(\r\n    private consentService: ConsentService,\r\n    private dataExportService: DataExportService,\r\n    private dataDeletionService: DataDeletionService,\r\n  ) {}\r\n\r\n  /**\r\n   * Get the consent service instance.\r\n   */\r\n  getConsentService() {\r\n    return this.consentService;\r\n  }\r\n\r\n  /**\r\n   * Get the data export service instance.\r\n   */\r\n  getDataExportService() {\r\n    return this.dataExportService;\r\n  }\r\n\r\n  /**\r\n   * Get the data deletion service instance.\r\n   */\r\n  getDataDeletionService() {\r\n    return this.dataDeletionService;\r\n  }\r\n\r\n  /**\r\n   * Generate a compliance report for a user.\r\n   * @param userId - User ID\r\n   * @returns Compliance report object\r\n   */\r\n  async generateComplianceReport(userId: string): Promise<any> {\r\n    const consents = await this.consentService.getUserConsents(userId);\r\n    const deletionRequests =\r\n      await this.dataDeletionService.getDeletionRequests(userId);\r\n\r\n    return {\r\n      userId,\r\n      generatedAt: new Date().toISOString(),\r\n      consents: consents.length,\r\n      activeDeletionRequests: deletionRequests.filter(\r\n        (r) => r.status === 'pending' || r.status === 'in_progress',\r\n      ).length,\r\n      completedDeletionRequests: deletionRequests.filter(\r\n        (r) => r.status === 'completed',\r\n      ).length,\r\n    };\r\n  }\r\n}\r\n"],"version":3}