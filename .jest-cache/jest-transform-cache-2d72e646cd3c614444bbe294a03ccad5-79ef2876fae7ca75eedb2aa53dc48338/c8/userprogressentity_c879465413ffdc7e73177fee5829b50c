a5c4d7b8f0af3b3aaee802049ea254a4
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f, _g, _h;
Object.defineProperty(exports, "__esModule", { value: true });
exports.UserProgress = void 0;
const typeorm_1 = require("typeorm");
const user_entity_1 = require("./user.entity");
const course_entity_1 = require("../../courses/entities/course.entity");
const lesson_entity_1 = require("../../lesson/entity/lesson.entity");
const course_module_entity_1 = require("../../courses/entities/course-module.entity");
const swagger_1 = require("@nestjs/swagger");
/**
 * UserProgress entity representing a user's progress in a course or lesson.
 */
let UserProgress = class UserProgress {
};
exports.UserProgress = UserProgress;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Progress ID', example: 'uuid-v4' }),
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], UserProgress.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Is completed', example: false }),
    (0, typeorm_1.Column)({ default: false }),
    __metadata("design:type", Boolean)
], UserProgress.prototype, "isCompleted", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Progress percentage', example: 75.5 }),
    (0, typeorm_1.Column)({ type: 'float', default: 0.0 }),
    __metadata("design:type", Number)
], UserProgress.prototype, "progressPercentage", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Flexible metadata', type: 'object' }),
    (0, typeorm_1.Column)({ type: 'jsonb', nullable: true }) // Flexible metadata storage
    ,
    __metadata("design:type", Object)
], UserProgress.prototype, "metadata", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Date completed', example: '2024-01-01T00:00:00Z' }),
    (0, typeorm_1.Column)({ type: 'timestamp', nullable: true }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], UserProgress.prototype, "completedAt", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Date last accessed', example: '2024-01-01T00:00:00Z' }),
    (0, typeorm_1.Column)({ type: 'timestamp', nullable: true }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], UserProgress.prototype, "lastAccessedAt", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => user_entity_1.User, (user) => user.progress),
    __metadata("design:type", typeof (_c = typeof user_entity_1.User !== "undefined" && user_entity_1.User) === "function" ? _c : Object)
], UserProgress.prototype, "user", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => course_entity_1.Course, (course) => course.userProgress),
    __metadata("design:type", typeof (_d = typeof course_entity_1.Course !== "undefined" && course_entity_1.Course) === "function" ? _d : Object)
], UserProgress.prototype, "course", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => course_module_entity_1.CourseModule, { nullable: true }),
    __metadata("design:type", typeof (_e = typeof course_module_entity_1.CourseModule !== "undefined" && course_module_entity_1.CourseModule) === "function" ? _e : Object)
], UserProgress.prototype, "module", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => lesson_entity_1.Lesson, { nullable: true }) // Optional relationship
    ,
    __metadata("design:type", typeof (_f = typeof lesson_entity_1.Lesson !== "undefined" && lesson_entity_1.Lesson) === "function" ? _f : Object)
], UserProgress.prototype, "lesson", void 0);
__decorate([
    (0, typeorm_1.CreateDateColumn)(),
    __metadata("design:type", typeof (_g = typeof Date !== "undefined" && Date) === "function" ? _g : Object)
], UserProgress.prototype, "createdAt", void 0);
__decorate([
    (0, typeorm_1.UpdateDateColumn)(),
    __metadata("design:type", typeof (_h = typeof Date !== "undefined" && Date) === "function" ? _h : Object)
], UserProgress.prototype, "updatedAt", void 0);
exports.UserProgress = UserProgress = __decorate([
    (0, typeorm_1.Entity)('user_progress'),
    (0, typeorm_1.Index)(['user', 'course', 'lesson'], { unique: true }) // Ensure unique progress per user/course/lesson
], UserProgress);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxnLWVrb2hcXERlc2t0b3BcXFN0cmVsbGVyTWluZHMtQmFja2VuZFxcc3JjXFx1c2Vyc1xcZW50aXRpZXNcXHVzZXItcHJvZ3Jlc3MuZW50aXR5LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQSxxQ0FBdUg7QUFDdkgsK0NBQXFDO0FBQ3JDLHdFQUE4RDtBQUM5RCxxRUFBMkQ7QUFDM0Qsc0ZBQTJFO0FBQzNFLDZDQUFtRTtBQUVuRTs7R0FFRztBQUdJLElBQU0sWUFBWSxHQUFsQixNQUFNLFlBQVk7Q0EwQ3hCLENBQUE7QUExQ1ksb0NBQVk7QUFHdkI7SUFGQyxJQUFBLHFCQUFXLEVBQUMsRUFBRSxXQUFXLEVBQUUsYUFBYSxFQUFFLE9BQU8sRUFBRSxTQUFTLEVBQUUsQ0FBQztJQUMvRCxJQUFBLGdDQUFzQixFQUFDLE1BQU0sQ0FBQzs7d0NBQ3BCO0FBSVg7SUFGQyxJQUFBLHFCQUFXLEVBQUMsRUFBRSxXQUFXLEVBQUUsY0FBYyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsQ0FBQztJQUM1RCxJQUFBLGdCQUFNLEVBQUMsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLENBQUM7O2lEQUNOO0FBSXJCO0lBRkMsSUFBQSxxQkFBVyxFQUFDLEVBQUUsV0FBVyxFQUFFLHFCQUFxQixFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQztJQUNsRSxJQUFBLGdCQUFNLEVBQUMsRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQzs7d0RBQ2I7QUFJM0I7SUFGQyxJQUFBLDZCQUFtQixFQUFDLEVBQUUsV0FBVyxFQUFFLG1CQUFtQixFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsQ0FBQztJQUN6RSxJQUFBLGdCQUFNLEVBQUMsRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLDRCQUE0Qjs7OzhDQUN6RDtBQUlkO0lBRkMsSUFBQSw2QkFBbUIsRUFBQyxFQUFFLFdBQVcsRUFBRSxnQkFBZ0IsRUFBRSxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsQ0FBQztJQUN2RixJQUFBLGdCQUFNLEVBQUMsRUFBRSxJQUFJLEVBQUUsV0FBVyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQztrREFDakMsSUFBSSxvQkFBSixJQUFJO2lEQUFDO0FBSWxCO0lBRkMsSUFBQSw2QkFBbUIsRUFBQyxFQUFFLFdBQVcsRUFBRSxvQkFBb0IsRUFBRSxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsQ0FBQztJQUMzRixJQUFBLGdCQUFNLEVBQUMsRUFBRSxJQUFJLEVBQUUsV0FBVyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQztrREFDOUIsSUFBSSxvQkFBSixJQUFJO29EQUFDO0FBR3JCO0lBREMsSUFBQSxtQkFBUyxFQUFDLEdBQUcsRUFBRSxDQUFDLGtCQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUM7a0RBQ3pDLGtCQUFJLG9CQUFKLGtCQUFJOzBDQUFDO0FBR1g7SUFEQyxJQUFBLG1CQUFTLEVBQUMsR0FBRyxFQUFFLENBQUMsc0JBQU0sRUFBRSxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQztrREFDakQsc0JBQU0sb0JBQU4sc0JBQU07NENBQUM7QUFHZjtJQURDLElBQUEsbUJBQVMsRUFBQyxHQUFHLEVBQUUsQ0FBQyxtQ0FBWSxFQUFFLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxDQUFDO2tEQUMxQyxtQ0FBWSxvQkFBWixtQ0FBWTs0Q0FBQztBQUdyQjtJQURDLElBQUEsbUJBQVMsRUFBQyxHQUFHLEVBQUUsQ0FBQyxzQkFBTSxFQUFFLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsd0JBQXdCOztrREFDN0Qsc0JBQU0sb0JBQU4sc0JBQU07NENBQUM7QUFHZjtJQURDLElBQUEsMEJBQWdCLEdBQUU7a0RBQ1IsSUFBSSxvQkFBSixJQUFJOytDQUFDO0FBR2hCO0lBREMsSUFBQSwwQkFBZ0IsR0FBRTtrREFDUixJQUFJLG9CQUFKLElBQUk7K0NBQUM7dUJBekNMLFlBQVk7SUFGeEIsSUFBQSxnQkFBTSxFQUFDLGVBQWUsQ0FBQztJQUN2QixJQUFBLGVBQUssRUFBQyxDQUFDLE1BQU0sRUFBRSxRQUFRLEVBQUUsUUFBUSxDQUFDLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxnREFBZ0Q7R0FDMUYsWUFBWSxDQTBDeEIiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxnLWVrb2hcXERlc2t0b3BcXFN0cmVsbGVyTWluZHMtQmFja2VuZFxcc3JjXFx1c2Vyc1xcZW50aXRpZXNcXHVzZXItcHJvZ3Jlc3MuZW50aXR5LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEVudGl0eSwgUHJpbWFyeUdlbmVyYXRlZENvbHVtbiwgQ29sdW1uLCBNYW55VG9PbmUsIEluZGV4LCBDcmVhdGVEYXRlQ29sdW1uLCBVcGRhdGVEYXRlQ29sdW1uIH0gZnJvbSAndHlwZW9ybSc7XHJcbmltcG9ydCB7IFVzZXIgfSBmcm9tICcuL3VzZXIuZW50aXR5JztcclxuaW1wb3J0IHsgQ291cnNlIH0gZnJvbSAnLi4vLi4vY291cnNlcy9lbnRpdGllcy9jb3Vyc2UuZW50aXR5JztcclxuaW1wb3J0IHsgTGVzc29uIH0gZnJvbSAnLi4vLi4vbGVzc29uL2VudGl0eS9sZXNzb24uZW50aXR5JztcclxuaW1wb3J0IHsgQ291cnNlTW9kdWxlIH0gZnJvbSAnLi4vLi4vY291cnNlcy9lbnRpdGllcy9jb3Vyc2UtbW9kdWxlLmVudGl0eSc7XHJcbmltcG9ydCB7IEFwaVByb3BlcnR5LCBBcGlQcm9wZXJ0eU9wdGlvbmFsIH0gZnJvbSAnQG5lc3Rqcy9zd2FnZ2VyJztcclxuXHJcbi8qKlxyXG4gKiBVc2VyUHJvZ3Jlc3MgZW50aXR5IHJlcHJlc2VudGluZyBhIHVzZXIncyBwcm9ncmVzcyBpbiBhIGNvdXJzZSBvciBsZXNzb24uXHJcbiAqL1xyXG5ARW50aXR5KCd1c2VyX3Byb2dyZXNzJylcclxuQEluZGV4KFsndXNlcicsICdjb3Vyc2UnLCAnbGVzc29uJ10sIHsgdW5pcXVlOiB0cnVlIH0pIC8vIEVuc3VyZSB1bmlxdWUgcHJvZ3Jlc3MgcGVyIHVzZXIvY291cnNlL2xlc3NvblxyXG5leHBvcnQgY2xhc3MgVXNlclByb2dyZXNzIHtcclxuICBAQXBpUHJvcGVydHkoeyBkZXNjcmlwdGlvbjogJ1Byb2dyZXNzIElEJywgZXhhbXBsZTogJ3V1aWQtdjQnIH0pXHJcbiAgQFByaW1hcnlHZW5lcmF0ZWRDb2x1bW4oJ3V1aWQnKVxyXG4gIGlkOiBzdHJpbmc7XHJcblxyXG4gIEBBcGlQcm9wZXJ0eSh7IGRlc2NyaXB0aW9uOiAnSXMgY29tcGxldGVkJywgZXhhbXBsZTogZmFsc2UgfSlcclxuICBAQ29sdW1uKHsgZGVmYXVsdDogZmFsc2UgfSlcclxuICBpc0NvbXBsZXRlZDogYm9vbGVhbjtcclxuXHJcbiAgQEFwaVByb3BlcnR5KHsgZGVzY3JpcHRpb246ICdQcm9ncmVzcyBwZXJjZW50YWdlJywgZXhhbXBsZTogNzUuNSB9KVxyXG4gIEBDb2x1bW4oeyB0eXBlOiAnZmxvYXQnLCBkZWZhdWx0OiAwLjAgfSlcclxuICBwcm9ncmVzc1BlcmNlbnRhZ2U6IG51bWJlcjtcclxuXHJcbiAgQEFwaVByb3BlcnR5T3B0aW9uYWwoeyBkZXNjcmlwdGlvbjogJ0ZsZXhpYmxlIG1ldGFkYXRhJywgdHlwZTogJ29iamVjdCcgfSlcclxuICBAQ29sdW1uKHsgdHlwZTogJ2pzb25iJywgbnVsbGFibGU6IHRydWUgfSkgLy8gRmxleGlibGUgbWV0YWRhdGEgc3RvcmFnZVxyXG4gIG1ldGFkYXRhOiBhbnk7XHJcblxyXG4gIEBBcGlQcm9wZXJ0eU9wdGlvbmFsKHsgZGVzY3JpcHRpb246ICdEYXRlIGNvbXBsZXRlZCcsIGV4YW1wbGU6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicgfSlcclxuICBAQ29sdW1uKHsgdHlwZTogJ3RpbWVzdGFtcCcsIG51bGxhYmxlOiB0cnVlIH0pXHJcbiAgY29tcGxldGVkQXQ6IERhdGU7XHJcblxyXG4gIEBBcGlQcm9wZXJ0eU9wdGlvbmFsKHsgZGVzY3JpcHRpb246ICdEYXRlIGxhc3QgYWNjZXNzZWQnLCBleGFtcGxlOiAnMjAyNC0wMS0wMVQwMDowMDowMFonIH0pXHJcbiAgQENvbHVtbih7IHR5cGU6ICd0aW1lc3RhbXAnLCBudWxsYWJsZTogdHJ1ZSB9KVxyXG4gIGxhc3RBY2Nlc3NlZEF0OiBEYXRlO1xyXG5cclxuICBATWFueVRvT25lKCgpID0+IFVzZXIsICh1c2VyKSA9PiB1c2VyLnByb2dyZXNzKVxyXG4gIHVzZXI6IFVzZXI7XHJcblxyXG4gIEBNYW55VG9PbmUoKCkgPT4gQ291cnNlLCAoY291cnNlKSA9PiBjb3Vyc2UudXNlclByb2dyZXNzKVxyXG4gIGNvdXJzZTogQ291cnNlO1xyXG5cclxuICBATWFueVRvT25lKCgpID0+IENvdXJzZU1vZHVsZSwgeyBudWxsYWJsZTogdHJ1ZSB9KVxyXG4gIG1vZHVsZTogQ291cnNlTW9kdWxlO1xyXG5cclxuICBATWFueVRvT25lKCgpID0+IExlc3NvbiwgeyBudWxsYWJsZTogdHJ1ZSB9KSAvLyBPcHRpb25hbCByZWxhdGlvbnNoaXBcclxuICBsZXNzb246IExlc3NvbjtcclxuXHJcbiAgQENyZWF0ZURhdGVDb2x1bW4oKVxyXG4gIGNyZWF0ZWRBdDogRGF0ZTtcclxuXHJcbiAgQFVwZGF0ZURhdGVDb2x1bW4oKVxyXG4gIHVwZGF0ZWRBdDogRGF0ZTtcclxufSJdLCJ2ZXJzaW9uIjozfQ==