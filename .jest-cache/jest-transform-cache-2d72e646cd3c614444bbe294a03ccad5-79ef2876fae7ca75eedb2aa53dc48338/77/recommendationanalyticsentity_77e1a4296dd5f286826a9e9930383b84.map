{"file":"C:\\Users\\g-ekoh\\Desktop\\StrellerMinds-Backend\\src\\recommendation\\entities\\recommendation-analytics.entity.ts","mappings":"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","names":[],"sources":["C:\\Users\\g-ekoh\\Desktop\\StrellerMinds-Backend\\src\\recommendation\\entities\\recommendation-analytics.entity.ts"],"sourcesContent":["import {\r\n  Entity,\r\n  PrimaryGeneratedColumn,\r\n  Column,\r\n  CreateDateColumn,\r\n  UpdateDateColumn,\r\n  Index,\r\n} from 'typeorm';\r\n\r\nexport enum AnalyticsEventType {\r\n  RECOMMENDATION_GENERATED = 'recommendation_generated',\r\n  RECOMMENDATION_VIEWED = 'recommendation_viewed',\r\n  RECOMMENDATION_CLICKED = 'recommendation_clicked',\r\n  RECOMMENDATION_DISMISSED = 'recommendation_dismissed',\r\n  RECOMMENDATION_COMPLETED = 'recommendation_completed',\r\n  LEARNING_PATH_CREATED = 'learning_path_created',\r\n  LEARNING_PATH_STARTED = 'learning_path_started',\r\n  LEARNING_PATH_STEP_COMPLETED = 'learning_path_step_completed',\r\n  LEARNING_PATH_COMPLETED = 'learning_path_completed',\r\n  ALGORITHM_PERFORMANCE = 'algorithm_performance',\r\n  MODEL_RETRAINED = 'model_retrained',\r\n}\r\n\r\n@Entity('recommendation_analytics')\r\n@Index(['eventType', 'createdAt'])\r\n@Index(['userId', 'eventType'])\r\n@Index(['algorithmVersion'])\r\n@Index(['createdAt'])\r\nexport class RecommendationAnalytics {\r\n  @PrimaryGeneratedColumn('uuid')\r\n  id: string;\r\n\r\n  @Column({\r\n    type: 'enum',\r\n    enum: AnalyticsEventType,\r\n  })\r\n  eventType: AnalyticsEventType;\r\n\r\n  @Column('uuid', { nullable: true })\r\n  @Index()\r\n  userId?: string;\r\n\r\n  @Column('uuid', { nullable: true })\r\n  recommendationId?: string;\r\n\r\n  @Column('uuid', { nullable: true })\r\n  learningPathId?: string;\r\n\r\n  @Column('uuid', { nullable: true })\r\n  courseId?: string;\r\n\r\n  @Column('varchar', { length: 100, nullable: true })\r\n  algorithmVersion?: string;\r\n\r\n  @Column('varchar', { length: 100, nullable: true })\r\n  modelVersion?: string;\r\n\r\n  @Column('decimal', { precision: 5, scale: 4, nullable: true })\r\n  confidenceScore?: number;\r\n\r\n  @Column('decimal', { precision: 5, scale: 4, nullable: true })\r\n  relevanceScore?: number;\r\n\r\n  @Column('decimal', { precision: 5, scale: 4, nullable: true })\r\n  actualScore?: number; // User feedback or implicit feedback score\r\n\r\n  @Column('int', { nullable: true })\r\n  position?: number; // Position in recommendation list\r\n\r\n  @Column('int', { nullable: true })\r\n  totalRecommendations?: number;\r\n\r\n  @Column('jsonb', { nullable: true })\r\n  metadata?: {\r\n    sessionId?: string;\r\n    deviceType?: string;\r\n    context?: string;\r\n    experimentGroup?: string;\r\n    abTestVariant?: string;\r\n    features?: Record<string, any>;\r\n    performance?: {\r\n      precision?: number;\r\n      recall?: number;\r\n      f1Score?: number;\r\n      ndcg?: number;\r\n      clickThroughRate?: number;\r\n      conversionRate?: number;\r\n    };\r\n    timing?: {\r\n      generationTimeMs?: number;\r\n      modelInferenceTimeMs?: number;\r\n      dataRetrievalTimeMs?: number;\r\n    };\r\n  };\r\n\r\n  @CreateDateColumn()\r\n  createdAt: Date;\r\n\r\n  @UpdateDateColumn()\r\n  updatedAt: Date;\r\n}\r\n\r\n@Entity('recommendation_metrics')\r\n@Index(['metricType', 'date'])\r\n@Index(['algorithmVersion', 'date'])\r\nexport class RecommendationMetrics {\r\n  @PrimaryGeneratedColumn('uuid')\r\n  id: string;\r\n\r\n  @Column('date')\r\n  @Index()\r\n  date: Date;\r\n\r\n  @Column('varchar', { length: 100 })\r\n  metricType: string; // 'ctr', 'conversion_rate', 'precision', 'recall', etc.\r\n\r\n  @Column('varchar', { length: 100, nullable: true })\r\n  algorithmVersion?: string;\r\n\r\n  @Column('varchar', { length: 100, nullable: true })\r\n  segmentType?: string; // 'all_users', 'new_users', 'returning_users', etc.\r\n\r\n  @Column('varchar', { length: 100, nullable: true })\r\n  segmentValue?: string;\r\n\r\n  @Column('decimal', { precision: 10, scale: 6 })\r\n  value: number;\r\n\r\n  @Column('int', { default: 0 })\r\n  sampleSize: number;\r\n\r\n  @Column('decimal', { precision: 10, scale: 6, nullable: true })\r\n  confidenceInterval?: number;\r\n\r\n  @Column('jsonb', { nullable: true })\r\n  metadata?: {\r\n    calculationMethod?: string;\r\n    filters?: Record<string, any>;\r\n    aggregationPeriod?: string;\r\n    baseline?: number;\r\n    improvement?: number;\r\n  };\r\n\r\n  @CreateDateColumn()\r\n  createdAt: Date;\r\n\r\n  @UpdateDateColumn()\r\n  updatedAt: Date;\r\n}\r\n"],"version":3}