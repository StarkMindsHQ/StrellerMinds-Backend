ee4e0e16a76ed110c73c6a927a1b1c5b
"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o;
Object.defineProperty(exports, "__esModule", { value: true });
exports.User = void 0;
/**
 * User entity representing a platform user.
 */
const typeorm_1 = require("typeorm");
const bcrypt = __importStar(require("bcryptjs"));
const swagger_1 = require("@nestjs/swagger");
const user_progress_entity_1 = require("./user-progress.entity");
const wallet_info_entity_1 = require("./wallet-info.entity");
const userRole_enum_1 = require("../enums/userRole.enum");
const accountStatus_enum_1 = require("../enums/accountStatus.enum");
const auth_token_entity_1 = require("../../auth/entities/auth-token.entity");
const course_entity_1 = require("../../courses/entities/course.entity");
const course_review_entity_1 = require("../../courses/entities/course-review.entity");
const certificate_entity_1 = require("../../certificate/entity/certificate.entity");
const user_profile_entity_1 = require("src/user-profiles/entities/user-profile.entity");
const user_settings_entity_1 = require("./user-settings.entity");
const courses_advance_entity_1 = require("src/courses-advances/entities/courses-advance.entity");
let User = class User {
    async setPassword(password) {
        const salt = await bcrypt.genSalt();
        this.password = await bcrypt.hash(password, salt);
    }
    async validatePassword(password) {
        return bcrypt.compare(password, this.password);
    }
};
exports.User = User;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Unique user ID', example: 'uuid-v4' }),
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], User.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'First name', example: 'John' }),
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], User.prototype, "firstName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Last name', example: 'Doe' }),
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], User.prototype, "lastName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Email address', example: 'user@example.com' }),
    (0, typeorm_1.Column)({ unique: true }),
    (0, typeorm_1.Index)(),
    __metadata("design:type", String)
], User.prototype, "email", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Password hash', example: 'hashed-password', writeOnly: true }),
    (0, typeorm_1.Column)({ select: false }),
    __metadata("design:type", String)
], User.prototype, "password", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Is user an instructor', example: false }),
    (0, typeorm_1.Column)({ default: false }),
    __metadata("design:type", Boolean)
], User.prototype, "isInstructor", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'User biography', example: 'A short bio' }),
    (0, typeorm_1.Column)({ nullable: true, type: 'text' }),
    __metadata("design:type", String)
], User.prototype, "bio", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ enum: userRole_enum_1.UserRole, description: 'User role', example: userRole_enum_1.UserRole.STUDENT }),
    (0, typeorm_1.Column)({ type: 'enum', enum: userRole_enum_1.UserRole, default: userRole_enum_1.UserRole.STUDENT }),
    (0, typeorm_1.Index)(),
    __metadata("design:type", typeof (_a = typeof userRole_enum_1.UserRole !== "undefined" && userRole_enum_1.UserRole) === "function" ? _a : Object)
], User.prototype, "role", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Profile image URL', example: 'https://cdn.com/profile.jpg' }),
    (0, typeorm_1.OneToMany)(() => courses_advance_entity_1.CoursesAdvance, (course) => course.instructor),
    __metadata("design:type", typeof (_b = typeof courses_advance_entity_1.CoursesAdvance !== "undefined" && courses_advance_entity_1.CoursesAdvance) === "function" ? _b : Object)
], User.prototype, "courses", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], User.prototype, "profileImageUrl", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Preferred language', example: 'en' }),
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], User.prototype, "preferredLanguage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Date created', example: '2024-01-01T00:00:00Z' }),
    (0, typeorm_1.CreateDateColumn)(),
    (0, typeorm_1.Index)(),
    __metadata("design:type", typeof (_c = typeof Date !== "undefined" && Date) === "function" ? _c : Object)
], User.prototype, "createdAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Date updated', example: '2024-01-01T00:00:00Z' }),
    (0, typeorm_1.UpdateDateColumn)(),
    __metadata("design:type", typeof (_d = typeof Date !== "undefined" && Date) === "function" ? _d : Object)
], User.prototype, "updatedAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ enum: accountStatus_enum_1.AccountStatus, description: 'Account status', example: accountStatus_enum_1.AccountStatus.ACTIVE }),
    (0, typeorm_1.Column)({ type: 'enum', enum: accountStatus_enum_1.AccountStatus, default: accountStatus_enum_1.AccountStatus.ACTIVE }),
    (0, typeorm_1.Index)(),
    __metadata("design:type", typeof (_e = typeof accountStatus_enum_1.AccountStatus !== "undefined" && accountStatus_enum_1.AccountStatus) === "function" ? _e : Object)
], User.prototype, "status", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Date deactivated', example: '2024-01-01T00:00:00Z' }),
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", typeof (_f = typeof Date !== "undefined" && Date) === "function" ? _f : Object)
], User.prototype, "deactivatedAt", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Date deletion requested', example: '2024-01-01T00:00:00Z' }),
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", typeof (_g = typeof Date !== "undefined" && Date) === "function" ? _g : Object)
], User.prototype, "deletionRequestedAt", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: 'Date deleted', example: '2024-01-01T00:00:00Z' }),
    (0, typeorm_1.DeleteDateColumn)({ nullable: true }),
    __metadata("design:type", typeof (_h = typeof Date !== "undefined" && Date) === "function" ? _h : Object)
], User.prototype, "deletedAt", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => user_progress_entity_1.UserProgress, (progress) => progress.user),
    __metadata("design:type", typeof (_j = typeof Promise !== "undefined" && Promise) === "function" ? _j : Object)
], User.prototype, "progress", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => course_entity_1.Course, (course) => course.instructor),
    __metadata("design:type", Array)
], User.prototype, "instructorCourses", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => certificate_entity_1.Certificate, (certificate) => certificate.user),
    __metadata("design:type", Array)
], User.prototype, "certificates", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => course_review_entity_1.CourseReview, (courseReview) => courseReview.user),
    __metadata("design:type", Array)
], User.prototype, "reviews", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => auth_token_entity_1.AuthToken, (authToken) => authToken.user),
    __metadata("design:type", typeof (_k = typeof Promise !== "undefined" && Promise) === "function" ? _k : Object)
], User.prototype, "authTokens", void 0);
__decorate([
    (0, typeorm_1.OneToOne)(() => wallet_info_entity_1.WalletInfo, (walletInfo) => walletInfo.user),
    __metadata("design:type", typeof (_l = typeof wallet_info_entity_1.WalletInfo !== "undefined" && wallet_info_entity_1.WalletInfo) === "function" ? _l : Object)
], User.prototype, "walletInfo", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], User.prototype, "refreshToken", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: false }),
    __metadata("design:type", Boolean)
], User.prototype, "isEmailVerified", void 0);
__decorate([
    (0, typeorm_1.OneToOne)(() => user_profile_entity_1.UserProfile, (profile) => profile.user, { cascade: true }),
    __metadata("design:type", typeof (_m = typeof user_profile_entity_1.UserProfile !== "undefined" && user_profile_entity_1.UserProfile) === "function" ? _m : Object)
], User.prototype, "profile", void 0);
__decorate([
    (0, typeorm_1.OneToOne)(() => user_settings_entity_1.UserSettings, (settings) => settings.user, {
        cascade: true,
        eager: true,
    }),
    __metadata("design:type", typeof (_o = typeof user_settings_entity_1.UserSettings !== "undefined" && user_settings_entity_1.UserSettings) === "function" ? _o : Object)
], User.prototype, "settings", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Username', example: 'johndoe', uniqueItems: true }),
    (0, typeorm_1.Column)({ unique: true, nullable: false }),
    __metadata("design:type", String)
], User.prototype, "username", void 0);
exports.User = User = __decorate([
    (0, typeorm_1.Entity)('users')
], User);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxnLWVrb2hcXERlc2t0b3BcXFN0cmVsbGVyTWluZHMtQmFja2VuZFxcc3JjXFx1c2Vyc1xcZW50aXRpZXNcXHVzZXIuZW50aXR5LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7R0FFRztBQUNILHFDQVVpQjtBQUNqQixpREFBbUM7QUFDbkMsNkNBQW1FO0FBQ25FLGlFQUFzRDtBQUN0RCw2REFBa0Q7QUFDbEQsMERBQWtEO0FBQ2xELG9FQUE0RDtBQUM1RCw2RUFBa0U7QUFDbEUsd0VBQThEO0FBQzlELHNGQUEyRTtBQUMzRSxvRkFBMEU7QUFDMUUsd0ZBQTZFO0FBQzdFLGlFQUFzRDtBQUN0RCxpR0FBc0Y7QUFHL0UsSUFBTSxJQUFJLEdBQVYsTUFBTSxJQUFJO0lBZ0hmLEtBQUssQ0FBQyxXQUFXLENBQUMsUUFBZ0I7UUFDaEMsTUFBTSxJQUFJLEdBQUcsTUFBTSxNQUFNLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDcEMsSUFBSSxDQUFDLFFBQVEsR0FBRyxNQUFNLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ3BELENBQUM7SUFFRCxLQUFLLENBQUMsZ0JBQWdCLENBQUMsUUFBZ0I7UUFDckMsT0FBTyxNQUFNLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDakQsQ0FBQztDQUNGLENBQUE7QUF4SFksb0JBQUk7QUFHZjtJQUZDLElBQUEscUJBQVcsRUFBQyxFQUFFLFdBQVcsRUFBRSxnQkFBZ0IsRUFBRSxPQUFPLEVBQUUsU0FBUyxFQUFFLENBQUM7SUFDbEUsSUFBQSxnQ0FBc0IsRUFBQyxNQUFNLENBQUM7O2dDQUNwQjtBQUlYO0lBRkMsSUFBQSxxQkFBVyxFQUFDLEVBQUUsV0FBVyxFQUFFLFlBQVksRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLENBQUM7SUFDM0QsSUFBQSxnQkFBTSxHQUFFOzt1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dkI7SUFGQyxJQUFBLHFCQUFXLEVBQUMsRUFBRSxXQUFXLEVBQUUsVUFBVSxFQUFFLE9BQU8sRUFBRSxTQUFTLEVBQUUsV0FBVyxFQUFFLElBQUksRUFBRSxDQUFDO0lBQy9FLElBQUEsZ0JBQU0sRUFBQyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxDQUFDOztzQ0FDekI7ZUExR04sSUFBSTtJQURoQixJQUFBLGdCQUFNLEVBQUMsT0FBTyxDQUFDO0dBQ0gsSUFBSSxDQXdIaEIiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxnLWVrb2hcXERlc2t0b3BcXFN0cmVsbGVyTWluZHMtQmFja2VuZFxcc3JjXFx1c2Vyc1xcZW50aXRpZXNcXHVzZXIuZW50aXR5LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBVc2VyIGVudGl0eSByZXByZXNlbnRpbmcgYSBwbGF0Zm9ybSB1c2VyLlxyXG4gKi9cclxuaW1wb3J0IHtcclxuICBFbnRpdHksXHJcbiAgUHJpbWFyeUdlbmVyYXRlZENvbHVtbixcclxuICBDb2x1bW4sXHJcbiAgT25lVG9NYW55LFxyXG4gIE9uZVRvT25lLFxyXG4gIENyZWF0ZURhdGVDb2x1bW4sXHJcbiAgVXBkYXRlRGF0ZUNvbHVtbixcclxuICBEZWxldGVEYXRlQ29sdW1uLFxyXG4gIEluZGV4LFxyXG59IGZyb20gJ3R5cGVvcm0nO1xyXG5pbXBvcnQgKiBhcyBiY3J5cHQgZnJvbSAnYmNyeXB0anMnO1xyXG5pbXBvcnQgeyBBcGlQcm9wZXJ0eSwgQXBpUHJvcGVydHlPcHRpb25hbCB9IGZyb20gJ0BuZXN0anMvc3dhZ2dlcic7XHJcbmltcG9ydCB7IFVzZXJQcm9ncmVzcyB9IGZyb20gJy4vdXNlci1wcm9ncmVzcy5lbnRpdHknO1xyXG5pbXBvcnQgeyBXYWxsZXRJbmZvIH0gZnJvbSAnLi93YWxsZXQtaW5mby5lbnRpdHknO1xyXG5pbXBvcnQgeyBVc2VyUm9sZSB9IGZyb20gJy4uL2VudW1zL3VzZXJSb2xlLmVudW0nO1xyXG5pbXBvcnQgeyBBY2NvdW50U3RhdHVzIH0gZnJvbSAnLi4vZW51bXMvYWNjb3VudFN0YXR1cy5lbnVtJztcclxuaW1wb3J0IHsgQXV0aFRva2VuIH0gZnJvbSAnLi4vLi4vYXV0aC9lbnRpdGllcy9hdXRoLXRva2VuLmVudGl0eSc7XHJcbmltcG9ydCB7IENvdXJzZSB9IGZyb20gJy4uLy4uL2NvdXJzZXMvZW50aXRpZXMvY291cnNlLmVudGl0eSc7XHJcbmltcG9ydCB7IENvdXJzZVJldmlldyB9IGZyb20gJy4uLy4uL2NvdXJzZXMvZW50aXRpZXMvY291cnNlLXJldmlldy5lbnRpdHknO1xyXG5pbXBvcnQgeyBDZXJ0aWZpY2F0ZSB9IGZyb20gJy4uLy4uL2NlcnRpZmljYXRlL2VudGl0eS9jZXJ0aWZpY2F0ZS5lbnRpdHknO1xyXG5pbXBvcnQgeyBVc2VyUHJvZmlsZSB9IGZyb20gJ3NyYy91c2VyLXByb2ZpbGVzL2VudGl0aWVzL3VzZXItcHJvZmlsZS5lbnRpdHknO1xyXG5pbXBvcnQgeyBVc2VyU2V0dGluZ3MgfSBmcm9tICcuL3VzZXItc2V0dGluZ3MuZW50aXR5JztcclxuaW1wb3J0IHsgQ291cnNlc0FkdmFuY2UgfSBmcm9tICdzcmMvY291cnNlcy1hZHZhbmNlcy9lbnRpdGllcy9jb3Vyc2VzLWFkdmFuY2UuZW50aXR5JztcclxuXHJcbkBFbnRpdHkoJ3VzZXJzJylcclxuZXhwb3J0IGNsYXNzIFVzZXIge1xyXG4gIEBBcGlQcm9wZXJ0eSh7IGRlc2NyaXB0aW9uOiAnVW5pcXVlIHVzZXIgSUQnLCBleGFtcGxlOiAndXVpZC12NCcgfSlcclxuICBAUHJpbWFyeUdlbmVyYXRlZENvbHVtbigndXVpZCcpXHJcbiAgaWQ6IHN0cmluZztcclxuXHJcbiAgQEFwaVByb3BlcnR5KHsgZGVzY3JpcHRpb246ICdGaXJzdCBuYW1lJywgZXhhbXBsZTogJ0pvaG4nIH0pXHJcbiAgQENvbHVtbigpXHJcbiAgZmlyc3ROYW1lOiBzdHJpbmc7XHJcblxyXG4gIEBBcGlQcm9wZXJ0eSh7IGRlc2NyaXB0aW9uOiAnTGFzdCBuYW1lJywgZXhhbXBsZTogJ0RvZScgfSlcclxuICBAQ29sdW1uKClcclxuICBsYXN0TmFtZTogc3RyaW5nO1xyXG5cclxuICBAQXBpUHJvcGVydHkoeyBkZXNjcmlwdGlvbjogJ0VtYWlsIGFkZHJlc3MnLCBleGFtcGxlOiAndXNlckBleGFtcGxlLmNvbScgfSlcclxuICBAQ29sdW1uKHsgdW5pcXVlOiB0cnVlIH0pXHJcbiAgQEluZGV4KClcclxuICBlbWFpbDogc3RyaW5nO1xyXG5cclxuICBAQXBpUHJvcGVydHkoeyBkZXNjcmlwdGlvbjogJ1Bhc3N3b3JkIGhhc2gnLCBleGFtcGxlOiAnaGFzaGVkLXBhc3N3b3JkJywgd3JpdGVPbmx5OiB0cnVlIH0pXHJcbiAgQENvbHVtbih7IHNlbGVjdDogZmFsc2UgfSlcclxuICBwYXNzd29yZDogc3RyaW5nO1xyXG5cclxuICBAQXBpUHJvcGVydHkoeyBkZXNjcmlwdGlvbjogJ0lzIHVzZXIgYW4gaW5zdHJ1Y3RvcicsIGV4YW1wbGU6IGZhbHNlIH0pXHJcbiAgQENvbHVtbih7IGRlZmF1bHQ6IGZhbHNlIH0pXHJcbiAgaXNJbnN0cnVjdG9yOiBib29sZWFuO1xyXG5cclxuICBAQXBpUHJvcGVydHlPcHRpb25hbCh7IGRlc2NyaXB0aW9uOiAnVXNlciBiaW9ncmFwaHknLCBleGFtcGxlOiAnQSBzaG9ydCBiaW8nIH0pXHJcbiAgQENvbHVtbih7IG51bGxhYmxlOiB0cnVlLCB0eXBlOiAndGV4dCcgfSlcclxuICBiaW86IHN0cmluZztcclxuXHJcbiAgQEFwaVByb3BlcnR5KHsgZW51bTogVXNlclJvbGUsIGRlc2NyaXB0aW9uOiAnVXNlciByb2xlJywgZXhhbXBsZTogVXNlclJvbGUuU1RVREVOVCB9KVxyXG4gIEBDb2x1bW4oeyB0eXBlOiAnZW51bScsIGVudW06IFVzZXJSb2xlLCBkZWZhdWx0OiBVc2VyUm9sZS5TVFVERU5UIH0pXHJcbiAgQEluZGV4KClcclxuICByb2xlOiBVc2VyUm9sZTtcclxuXHJcbiAgQEFwaVByb3BlcnR5T3B0aW9uYWwoeyBkZXNjcmlwdGlvbjogJ1Byb2ZpbGUgaW1hZ2UgVVJMJywgZXhhbXBsZTogJ2h0dHBzOi8vY2RuLmNvbS9wcm9maWxlLmpwZycgfSlcclxuICBAT25lVG9NYW55KCgpID0+IENvdXJzZXNBZHZhbmNlLCAoY291cnNlKSA9PiBjb3Vyc2UuaW5zdHJ1Y3RvcilcclxuICBjb3Vyc2VzOiBDb3Vyc2VzQWR2YW5jZTtcclxuICBAQ29sdW1uKHsgbnVsbGFibGU6IHRydWUgfSlcclxuICBwcm9maWxlSW1hZ2VVcmw/OiBzdHJpbmc7XHJcblxyXG4gIEBBcGlQcm9wZXJ0eU9wdGlvbmFsKHsgZGVzY3JpcHRpb246ICdQcmVmZXJyZWQgbGFuZ3VhZ2UnLCBleGFtcGxlOiAnZW4nIH0pXHJcbiAgQENvbHVtbih7IG51bGxhYmxlOiB0cnVlIH0pXHJcbiAgcHJlZmVycmVkTGFuZ3VhZ2U6IHN0cmluZztcclxuXHJcbiAgQEFwaVByb3BlcnR5KHsgZGVzY3JpcHRpb246ICdEYXRlIGNyZWF0ZWQnLCBleGFtcGxlOiAnMjAyNC0wMS0wMVQwMDowMDowMFonIH0pXHJcbiAgQENyZWF0ZURhdGVDb2x1bW4oKVxyXG4gIEBJbmRleCgpXHJcbiAgY3JlYXRlZEF0OiBEYXRlO1xyXG5cclxuICBAQXBpUHJvcGVydHkoeyBkZXNjcmlwdGlvbjogJ0RhdGUgdXBkYXRlZCcsIGV4YW1wbGU6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicgfSlcclxuICBAVXBkYXRlRGF0ZUNvbHVtbigpXHJcbiAgdXBkYXRlZEF0OiBEYXRlO1xyXG5cclxuICBAQXBpUHJvcGVydHkoeyBlbnVtOiBBY2NvdW50U3RhdHVzLCBkZXNjcmlwdGlvbjogJ0FjY291bnQgc3RhdHVzJywgZXhhbXBsZTogQWNjb3VudFN0YXR1cy5BQ1RJVkUgfSlcclxuICBAQ29sdW1uKHsgdHlwZTogJ2VudW0nLCBlbnVtOiBBY2NvdW50U3RhdHVzLCBkZWZhdWx0OiBBY2NvdW50U3RhdHVzLkFDVElWRSB9KVxyXG4gIEBJbmRleCgpXHJcbiAgc3RhdHVzOiBBY2NvdW50U3RhdHVzO1xyXG5cclxuICBAQXBpUHJvcGVydHlPcHRpb25hbCh7IGRlc2NyaXB0aW9uOiAnRGF0ZSBkZWFjdGl2YXRlZCcsIGV4YW1wbGU6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicgfSlcclxuICBAQ29sdW1uKHsgbnVsbGFibGU6IHRydWUgfSlcclxuICBkZWFjdGl2YXRlZEF0OiBEYXRlO1xyXG5cclxuICBAQXBpUHJvcGVydHlPcHRpb25hbCh7IGRlc2NyaXB0aW9uOiAnRGF0ZSBkZWxldGlvbiByZXF1ZXN0ZWQnLCBleGFtcGxlOiAnMjAyNC0wMS0wMVQwMDowMDowMFonIH0pXHJcbiAgQENvbHVtbih7IG51bGxhYmxlOiB0cnVlIH0pXHJcbiAgZGVsZXRpb25SZXF1ZXN0ZWRBdDogRGF0ZTtcclxuXHJcbiAgQEFwaVByb3BlcnR5T3B0aW9uYWwoeyBkZXNjcmlwdGlvbjogJ0RhdGUgZGVsZXRlZCcsIGV4YW1wbGU6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicgfSlcclxuICBARGVsZXRlRGF0ZUNvbHVtbih7IG51bGxhYmxlOiB0cnVlIH0pXHJcbiAgZGVsZXRlZEF0OiBEYXRlO1xyXG5cclxuICBAT25lVG9NYW55KCgpID0+IFVzZXJQcm9ncmVzcywgKHByb2dyZXNzKSA9PiBwcm9ncmVzcy51c2VyKVxyXG4gIHByb2dyZXNzOiBQcm9taXNlPFVzZXJQcm9ncmVzc1tdPjtcclxuXHJcbiAgQE9uZVRvTWFueSgoKSA9PiBDb3Vyc2UsIChjb3Vyc2UpID0+IGNvdXJzZS5pbnN0cnVjdG9yKVxyXG4gIGluc3RydWN0b3JDb3Vyc2VzOiBDb3Vyc2VbXTtcclxuXHJcbiAgQE9uZVRvTWFueSgoKSA9PiBDZXJ0aWZpY2F0ZSwgKGNlcnRpZmljYXRlKSA9PiBjZXJ0aWZpY2F0ZS51c2VyKVxyXG4gIGNlcnRpZmljYXRlczogQ2VydGlmaWNhdGVbXTtcclxuXHJcbiAgQE9uZVRvTWFueSgoKSA9PiBDb3Vyc2VSZXZpZXcsIChjb3Vyc2VSZXZpZXcpID0+IGNvdXJzZVJldmlldy51c2VyKVxyXG4gIHJldmlld3M6IENvdXJzZVJldmlld1tdO1xyXG5cclxuICBAT25lVG9NYW55KCgpID0+IEF1dGhUb2tlbiwgKGF1dGhUb2tlbikgPT4gYXV0aFRva2VuLnVzZXIpXHJcbiAgYXV0aFRva2VuczogUHJvbWlzZTxBdXRoVG9rZW5bXT47XHJcblxyXG4gIEBPbmVUb09uZSgoKSA9PiBXYWxsZXRJbmZvLCAod2FsbGV0SW5mbykgPT4gd2FsbGV0SW5mby51c2VyKVxyXG4gIHdhbGxldEluZm86IFdhbGxldEluZm87XHJcblxyXG4gIEBDb2x1bW4oeyBudWxsYWJsZTogdHJ1ZSB9KVxyXG4gIHJlZnJlc2hUb2tlbj86IHN0cmluZztcclxuXHJcbiAgQENvbHVtbih7IGRlZmF1bHQ6IGZhbHNlIH0pXHJcbiAgaXNFbWFpbFZlcmlmaWVkOiBib29sZWFuO1xyXG5cclxuICBAT25lVG9PbmUoKCkgPT4gVXNlclByb2ZpbGUsIChwcm9maWxlKSA9PiBwcm9maWxlLnVzZXIsIHsgY2FzY2FkZTogdHJ1ZSB9KVxyXG4gIHByb2ZpbGU6IFVzZXJQcm9maWxlO1xyXG5cclxuICBAT25lVG9PbmUoKCkgPT4gVXNlclNldHRpbmdzLCAoc2V0dGluZ3MpID0+IHNldHRpbmdzLnVzZXIsIHtcclxuICAgIGNhc2NhZGU6IHRydWUsXHJcbiAgICBlYWdlcjogdHJ1ZSxcclxuICB9KVxyXG4gIHNldHRpbmdzOiBVc2VyU2V0dGluZ3M7XHJcblxyXG4gIEBBcGlQcm9wZXJ0eSh7IGRlc2NyaXB0aW9uOiAnVXNlcm5hbWUnLCBleGFtcGxlOiAnam9obmRvZScsIHVuaXF1ZUl0ZW1zOiB0cnVlIH0pXHJcbiAgQENvbHVtbih7IHVuaXF1ZTogdHJ1ZSwgbnVsbGFibGU6IGZhbHNlIH0pXHJcbiAgdXNlcm5hbWU6IHN0cmluZztcclxuXHJcbiAgZ3JhZGVzR2l2ZW46IGFueTtcclxuICBncmFkZXNSZWNlaXZlZDogYW55O1xyXG4gIHJlcHV0YXRpb246IG51bWJlcjtcclxuXHJcbiAgYXN5bmMgc2V0UGFzc3dvcmQocGFzc3dvcmQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgY29uc3Qgc2FsdCA9IGF3YWl0IGJjcnlwdC5nZW5TYWx0KCk7XHJcbiAgICB0aGlzLnBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIHNhbHQpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgdmFsaWRhdGVQYXNzd29yZChwYXNzd29yZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICByZXR1cm4gYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIHRoaXMucGFzc3dvcmQpO1xyXG4gIH1cclxufVxyXG4iXSwidmVyc2lvbiI6M30=