d653b74bb191a5d3fbbc0a088142656b
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const progress_service_1 = require("./progress.service");
describe('ProgressService', () => {
    let service;
    beforeEach(() => {
        service = new progress_service_1.ProgressService();
    });
    it('should mark a lesson as completed for a user', () => {
        service.completeLesson(1, 101);
        const progress = service.getProgressData(1, 10);
        expect(progress.completedLessons).toContain(101);
    });
    it('should not throw when marking multiple lessons', () => {
        service.completeLesson(1, 101);
        service.completeLesson(1, 102);
        const progress = service.getProgressData(1, 10);
        expect(progress.completedLessons).toEqual(expect.arrayContaining([101, 102]));
    });
    it('should return 0% for users with no progress', () => {
        const percentage = service.getCompletionPercentage(99, 10);
        expect(percentage).toBe(0);
    });
    it('should return correct completion percentage', () => {
        service.completeLesson(2, 201);
        service.completeLesson(2, 202);
        const percentage = service.getCompletionPercentage(2, 4);
        expect(percentage).toBe(50);
    });
    it('should return progress data with userId and percentage', () => {
        service.completeLesson(3, 301);
        const progress = service.getProgressData(3, 5);
        expect(progress.userId).toBe(3);
        expect(progress.completedLessons).toEqual([301]);
        expect(progress.completionPercentage).toBe(20);
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxnLWVrb2hcXERlc2t0b3BcXFN0cmVsbGVyTWluZHMtQmFja2VuZFxcc3JjXFxwcm9ncmVzc1xccHJvZ3Jlc3Muc2VydmljZS5zcGVjLnRzIiwibWFwcGluZ3MiOiI7O0FBQUEseURBQXFEO0FBRXJELFFBQVEsQ0FBQyxpQkFBaUIsRUFBRSxHQUFHLEVBQUU7SUFDL0IsSUFBSSxPQUF3QixDQUFDO0lBRTdCLFVBQVUsQ0FBQyxHQUFHLEVBQUU7UUFDZCxPQUFPLEdBQUcsSUFBSSxrQ0FBZSxFQUFFLENBQUM7SUFDbEMsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsOENBQThDLEVBQUUsR0FBRyxFQUFFO1FBQ3RELE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQy9CLE1BQU0sUUFBUSxHQUFHLE9BQU8sQ0FBQyxlQUFlLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQ2hELE1BQU0sQ0FBQyxRQUFRLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDbkQsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsZ0RBQWdELEVBQUUsR0FBRyxFQUFFO1FBQ3hELE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQy9CLE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQy9CLE1BQU0sUUFBUSxHQUFHLE9BQU8sQ0FBQyxlQUFlLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQ2hELE1BQU0sQ0FBQyxRQUFRLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLGVBQWUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDaEYsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsNkNBQTZDLEVBQUUsR0FBRyxFQUFFO1FBQ3JELE1BQU0sVUFBVSxHQUFHLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDM0QsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUM3QixDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQyw2Q0FBNkMsRUFBRSxHQUFHLEVBQUU7UUFDckQsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDL0IsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDL0IsTUFBTSxVQUFVLEdBQUcsT0FBTyxDQUFDLHVCQUF1QixDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUN6RCxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQzlCLENBQUMsQ0FBQyxDQUFDO0lBRUgsRUFBRSxDQUFDLHdEQUF3RCxFQUFFLEdBQUcsRUFBRTtRQUNoRSxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUMvQixNQUFNLFFBQVEsR0FBRyxPQUFPLENBQUMsZUFBZSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUMvQyxNQUFNLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNoQyxNQUFNLENBQUMsUUFBUSxDQUFDLGdCQUFnQixDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNqRCxNQUFNLENBQUMsUUFBUSxDQUFDLG9CQUFvQixDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ2pELENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxnLWVrb2hcXERlc2t0b3BcXFN0cmVsbGVyTWluZHMtQmFja2VuZFxcc3JjXFxwcm9ncmVzc1xccHJvZ3Jlc3Muc2VydmljZS5zcGVjLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByb2dyZXNzU2VydmljZSB9IGZyb20gJy4vcHJvZ3Jlc3Muc2VydmljZSc7XHJcblxyXG5kZXNjcmliZSgnUHJvZ3Jlc3NTZXJ2aWNlJywgKCkgPT4ge1xyXG4gIGxldCBzZXJ2aWNlOiBQcm9ncmVzc1NlcnZpY2U7XHJcblxyXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgc2VydmljZSA9IG5ldyBQcm9ncmVzc1NlcnZpY2UoKTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ3Nob3VsZCBtYXJrIGEgbGVzc29uIGFzIGNvbXBsZXRlZCBmb3IgYSB1c2VyJywgKCkgPT4ge1xyXG4gICAgc2VydmljZS5jb21wbGV0ZUxlc3NvbigxLCAxMDEpO1xyXG4gICAgY29uc3QgcHJvZ3Jlc3MgPSBzZXJ2aWNlLmdldFByb2dyZXNzRGF0YSgxLCAxMCk7XHJcbiAgICBleHBlY3QocHJvZ3Jlc3MuY29tcGxldGVkTGVzc29ucykudG9Db250YWluKDEwMSk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdzaG91bGQgbm90IHRocm93IHdoZW4gbWFya2luZyBtdWx0aXBsZSBsZXNzb25zJywgKCkgPT4ge1xyXG4gICAgc2VydmljZS5jb21wbGV0ZUxlc3NvbigxLCAxMDEpO1xyXG4gICAgc2VydmljZS5jb21wbGV0ZUxlc3NvbigxLCAxMDIpO1xyXG4gICAgY29uc3QgcHJvZ3Jlc3MgPSBzZXJ2aWNlLmdldFByb2dyZXNzRGF0YSgxLCAxMCk7XHJcbiAgICBleHBlY3QocHJvZ3Jlc3MuY29tcGxldGVkTGVzc29ucykudG9FcXVhbChleHBlY3QuYXJyYXlDb250YWluaW5nKFsxMDEsIDEwMl0pKTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ3Nob3VsZCByZXR1cm4gMCUgZm9yIHVzZXJzIHdpdGggbm8gcHJvZ3Jlc3MnLCAoKSA9PiB7XHJcbiAgICBjb25zdCBwZXJjZW50YWdlID0gc2VydmljZS5nZXRDb21wbGV0aW9uUGVyY2VudGFnZSg5OSwgMTApO1xyXG4gICAgZXhwZWN0KHBlcmNlbnRhZ2UpLnRvQmUoMCk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdzaG91bGQgcmV0dXJuIGNvcnJlY3QgY29tcGxldGlvbiBwZXJjZW50YWdlJywgKCkgPT4ge1xyXG4gICAgc2VydmljZS5jb21wbGV0ZUxlc3NvbigyLCAyMDEpO1xyXG4gICAgc2VydmljZS5jb21wbGV0ZUxlc3NvbigyLCAyMDIpO1xyXG4gICAgY29uc3QgcGVyY2VudGFnZSA9IHNlcnZpY2UuZ2V0Q29tcGxldGlvblBlcmNlbnRhZ2UoMiwgNCk7XHJcbiAgICBleHBlY3QocGVyY2VudGFnZSkudG9CZSg1MCk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdzaG91bGQgcmV0dXJuIHByb2dyZXNzIGRhdGEgd2l0aCB1c2VySWQgYW5kIHBlcmNlbnRhZ2UnLCAoKSA9PiB7XHJcbiAgICBzZXJ2aWNlLmNvbXBsZXRlTGVzc29uKDMsIDMwMSk7XHJcbiAgICBjb25zdCBwcm9ncmVzcyA9IHNlcnZpY2UuZ2V0UHJvZ3Jlc3NEYXRhKDMsIDUpO1xyXG4gICAgZXhwZWN0KHByb2dyZXNzLnVzZXJJZCkudG9CZSgzKTtcclxuICAgIGV4cGVjdChwcm9ncmVzcy5jb21wbGV0ZWRMZXNzb25zKS50b0VxdWFsKFszMDFdKTtcclxuICAgIGV4cGVjdChwcm9ncmVzcy5jb21wbGV0aW9uUGVyY2VudGFnZSkudG9CZSgyMCk7XHJcbiAgfSk7XHJcbn0pO1xyXG4iXSwidmVyc2lvbiI6M30=